{"ast":null,"code":"var _jsxFileName = \"/home/lightmare/Documents/dev/web/tnp_plan/client/src/components/ProductionTable/ProductionTable.tsx\";\nimport React, { useState } from 'react';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport TableFooter from '@material-ui/core/TableFooter';\nimport Paper from '@material-ui/core/Paper';\nimport './ProductionTable.css';\n\nconst getKForToilets = avg => {\n  if (avg > 22700 && avg < 26000) {\n    return 1.1;\n  }\n\n  if (avg > 26000 && avg < 27000) {\n    return 1.2;\n  }\n\n  if (avg > 27000) {\n    return 1.25;\n  }\n\n  return 1.0;\n};\n\nconst getKForNapkins = avg => {\n  if (avg > 2100 && avg < 2401) {\n    return 1.1;\n  }\n\n  if (avg > 2400 && avg < 2501) {\n    return 1.2;\n  }\n\n  if (avg > 2500) {\n    return 1.25;\n  }\n\n  return 1.0;\n};\n\nexport const ProductionTable = props => {\n  const {\n    month\n  } = props;\n  const [remainTodo, setRemainTodo] = useState(0);\n  const [avg, setAvg] = useState(0);\n  const [avgWithPpr, setAvgWithPpr] = useState(0);\n  const [k, setK] = useState(1);\n\n  const remainToDoChanged = () => {\n    const res = month.plan - month.workDays.reduce((acc, d) => acc + d.amount, 0);\n    setRemainTodo(res > 0 ? res : 0);\n  };\n\n  const avgChanged = m => {\n    let res = m.workDays.reduce((acc, d) => acc + d.amount, 0);\n    res = Math.round(res / (m.workDays.length || 1));\n    setAvg(res);\n  };\n\n  const avgWithPprChanged = m => {\n    const avg = Math.round(m.workDays.reduce((acc, d) => acc + d.amount, 0) || 0 / (m.workDays.length - m.ppr / 10 || 1));\n    setAvgWithPpr(avg);\n  };\n\n  const onKChange = m => {\n    const avg = Math.round(m.workDays.reduce((acc, d) => acc + d.amount, 0) || 0 / (m.workDays.length - m.ppr / 10 || 1));\n    if (m.product === Products.napkins) setK(getKForNapkins(avg));\n    if (m.product === Products.toilets) setK(getKForToilets(avg));\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(TableContainer, {\n    component: Paper,\n    className: \"production-table__table-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(Table, {\n    stickyHeader: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TableHead, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(TableRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(TableCell, {\n    className: \"production-table__cell\",\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"production-table__head-cell\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 16\n    }\n  }, \"\\u041F\\u043B\\u0430\\u043D\")), /*#__PURE__*/React.createElement(TableCell, {\n    className: \"production-table__cell\",\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"production-table__head-cell\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 16\n    }\n  }, \"\\u041E\\u0441\\u0442\\u0430\\u0442\\u043E\\u043A\"))), /*#__PURE__*/React.createElement(TableRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(TableCell, {\n    className: \"production-table__cell\",\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 15\n    }\n  }, month.plan), /*#__PURE__*/React.createElement(TableCell, {\n    className: \"production-table__cell\",\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 15\n    }\n  }, \"32000\")), /*#__PURE__*/React.createElement(TableRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(TableCell, {\n    className: \"production-table__cell\",\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"production-table__head-cell\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 16\n    }\n  }, \"\\u041A\\u043E\\u044D\\u0444\\u0444\\u0438\\u0446\\u0438\\u0435\\u043D\\u0442\")), /*#__PURE__*/React.createElement(TableCell, {\n    className: \"production-table__cell\",\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"production-table__head-cell\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 16\n    }\n  }, \"\\u0421\\u0440\\u0435\\u0434\\u043D\\u0435\\u0435 \\u0432 \\u0441\\u043C\\u0435\\u043D\\u0443\"))), /*#__PURE__*/React.createElement(TableRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(TableCell, {\n    className: \"production-table__cell\",\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 15\n    }\n  }, k), /*#__PURE__*/React.createElement(TableCell, {\n    className: \"production-table__cell\",\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 15\n    }\n  }, avg)), /*#__PURE__*/React.createElement(TableRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(TableCell, {\n    className: \"production-table__cell\",\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"production-table__head-cell\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 16\n    }\n  }, \"\\u0427\\u0430\\u0441\\u044B \\u041F\\u041F\\u0420\")), /*#__PURE__*/React.createElement(TableCell, {\n    className: \"production-table__cell\",\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"production-table__head-cell\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 16\n    }\n  }, \"\\u0421\\u0440\\u0435\\u0434\\u043D\\u0435\\u0435 \\u0441 \\u041F\\u041F\\u0420\"))), /*#__PURE__*/React.createElement(TableRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(TableCell, {\n    className: \"production-table__cell\",\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 15\n    }\n  }, month.ppr), /*#__PURE__*/React.createElement(TableCell, {\n    className: \"production-table__cell\",\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 15\n    }\n  }, avgWithPpr)), /*#__PURE__*/React.createElement(TableRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(TableCell, {\n    className: \"production-table__cell\",\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"production-table__head-cell\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 16\n    }\n  }, \"\\u0421\\u043C\\u0435\\u043D\\u0430\")), /*#__PURE__*/React.createElement(TableCell, {\n    className: \"production-table__cell\",\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"production-table__head-cell\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 16\n    }\n  }, \"\\u041A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E\")))), /*#__PURE__*/React.createElement(TableBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 11\n    }\n  }, month.workDays.map(workDay => /*#__PURE__*/React.createElement(TableRow, {\n    key: workDay.day,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(TableCell, {\n    className: \"production-table__cell\",\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 17\n    }\n  }, workDay.day + 1), /*#__PURE__*/React.createElement(TableCell, {\n    className: \"production-table__cell\",\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 17\n    }\n  }, workDay.amount)))))), /*#__PURE__*/React.createElement(TableContainer, {\n    component: Paper,\n    className: \"production-table__table-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Table, {\n    stickyHeader: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(TableFooter, {\n    className: \"production-table__footer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 12\n    }\n  }, /*#__PURE__*/React.createElement(TableRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 14\n    }\n  }, /*#__PURE__*/React.createElement(TableCell, {\n    className: \"production-table__cell production-table__footer-cell\",\n    variant: \"head\",\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 16\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"production-table__head-cell\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 17\n    }\n  }, \"\\u041D\\u0443\\u0436\\u043D\\u043E \\u0434\\u0435\\u043B\\u0430\\u0442\\u044C \\u043F\\u043E\"), \":\"), /*#__PURE__*/React.createElement(TableCell, {\n    className: \"production-table__cell production-table__footer-cell\",\n    variant: \"head\",\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 16\n    }\n  }, remainTodo))))));\n};","map":{"version":3,"sources":["/home/lightmare/Documents/dev/web/tnp_plan/client/src/components/ProductionTable/ProductionTable.tsx"],"names":["React","useState","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","TableFooter","Paper","getKForToilets","avg","getKForNapkins","ProductionTable","props","month","remainTodo","setRemainTodo","setAvg","avgWithPpr","setAvgWithPpr","k","setK","remainToDoChanged","res","plan","workDays","reduce","acc","d","amount","avgChanged","m","Math","round","length","avgWithPprChanged","ppr","onKChange","product","Products","napkins","toilets","map","workDay","day"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\n\nimport { WorkMonth } from '../../models';\n\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport TableFooter  from '@material-ui/core/TableFooter';\nimport Paper from '@material-ui/core/Paper';\n\nimport './ProductionTable.css';\n\nconst getKForToilets = (avg: number) => {\n  if (avg > 22700 && avg < 26000) {\n    return 1.1;\n  }\n\n  if (avg > 26000 && avg < 27000) {\n    return 1.2;\n  }\n\n  if (avg > 27000) {\n    return 1.25;\n  }\n\n  return 1.0;\n}\n\nconst getKForNapkins = (avg: number) => {\n  if (avg > 2100 && avg < 2401) {\n    return 1.1;\n  }\n  if (avg > 2400 && avg < 2501) {\n    return 1.2;\n  }\n\n  if (avg > 2500) {\n    return 1.25;\n  }\n\n  return 1.0;\n}\n\ninterface Props {\n\tmonth: WorkMonth;\n}\n\nexport const ProductionTable = (props: Props) => {\n\tconst {month} = props;\n\tconst [remainTodo, setRemainTodo] = useState(0);\n\tconst [avg, setAvg] = useState(0);\n\tconst [avgWithPpr, setAvgWithPpr] = useState(0);\n\tconst [k, setK] = useState(1);\n\n\tconst remainToDoChanged = () => {\n\t    const res = month.plan - month.workDays.reduce((acc, d) => acc + d.amount, 0);\n\t    setRemainTodo(res > 0 ? res : 0);\n\t}\n\n\tconst avgChanged = (m: WorkMonth) => {\n\t    let res = m.workDays.reduce((acc, d) => acc + d.amount, 0);\n\t    res = Math.round(res / (m.workDays.length || 1));\n\t    setAvg(res);\n\t}\n\n\tconst avgWithPprChanged = (m: WorkMonth) => {\n\t    const avg = Math.round(m.workDays.reduce((acc, d) => acc + d.amount, 0) || 0 / ((m.workDays.length - m.ppr / 10) || 1));\n\t    setAvgWithPpr(avg);\n\t}\n\n\t const onKChange = (m: WorkMonth) => {\n\t    const avg = Math.round(m.workDays.reduce((acc, d) => acc + d.amount, 0) || 0 / ((m.workDays.length - m.ppr / 10) || 1));\n\t    if (m.product === Products.napkins)\n\t      setK(getKForNapkins(avg));\n\n\t    if (m.product === Products.toilets)\n\t      setK(getKForToilets(avg));\n\t}\n\t\n\n\treturn (\n\t\t<>\n\t\t\t<TableContainer component={Paper} className=\"production-table__table-container\">\n\t\t      <Table stickyHeader>\n\n\t\t        <TableHead>\n\t\t          <TableRow>\n\t\t            <TableCell className=\"production-table__cell\" align=\"center\">\n\t\t            \t<span className=\"production-table__head-cell\">План</span>\n\t\t            </TableCell>\n\t\t            <TableCell className=\"production-table__cell\" align=\"center\">\n\t\t            \t<span className=\"production-table__head-cell\">Остаток</span>\n\t\t            </TableCell>\n\t\t          </TableRow>\n\n\t\t          <TableRow>\n\t\t            <TableCell className=\"production-table__cell\" align=\"center\">{month.plan}</TableCell>\n\t\t            <TableCell className=\"production-table__cell\" align=\"center\">32000</TableCell>\n\t\t          </TableRow>\n\n\t\t          <TableRow>\n\t\t            <TableCell className=\"production-table__cell\" align=\"center\">\n\t\t            \t<span className=\"production-table__head-cell\">Коэффициент</span>\n\t\t            </TableCell>\n\t\t            <TableCell className=\"production-table__cell\" align=\"center\">\n\t\t            \t<span className=\"production-table__head-cell\">Среднее в смену</span>\n\t\t            </TableCell>\n\t\t          </TableRow>\n\n\t\t          <TableRow>\n\t\t            <TableCell className=\"production-table__cell\" align=\"center\">{k}</TableCell>\n\t\t            <TableCell className=\"production-table__cell\" align=\"center\">{avg}</TableCell>\n\t\t          </TableRow>\n\n\t\t          <TableRow>\n\t\t            <TableCell className=\"production-table__cell\" align=\"center\">\n\t\t            \t<span className=\"production-table__head-cell\">Часы ППР</span>\n\t\t            </TableCell>\n\t\t            <TableCell className=\"production-table__cell\" align=\"center\">\n\t\t            \t<span className=\"production-table__head-cell\">Среднее с ППР</span>\n\t\t            </TableCell>\n\t\t          </TableRow>\n\n\t\t          <TableRow>\n\t\t            <TableCell className=\"production-table__cell\" align=\"center\">{month.ppr}</TableCell>\n\t\t            <TableCell className=\"production-table__cell\" align=\"center\">{avgWithPpr}</TableCell>\n\t\t          </TableRow>\n\n\t\t          <TableRow>\n\t\t            <TableCell className=\"production-table__cell\" align=\"center\">\n\t\t            \t<span className=\"production-table__head-cell\">Смена</span>\n\t\t            </TableCell>\n\t\t            <TableCell className=\"production-table__cell\" align=\"center\">\n\t\t            \t<span className=\"production-table__head-cell\">Количество</span>\n\t\t            </TableCell>\n\t\t          </TableRow>\n\n\t\t        </TableHead>\n\n\t\t        <TableBody>\n\t\t          {month.workDays.map((workDay) => (\n\t\t            <TableRow key={workDay.day}>\n\t\t              <TableCell className=\"production-table__cell\" align=\"center\">\n\t\t                {workDay.day + 1}\n\t\t              </TableCell>\n\t\t              <TableCell className=\"production-table__cell\" align=\"center\">\n\t\t              \t{workDay.amount}\n\t\t              </TableCell>\n\t\t            </TableRow>\n\t\t          ))}\n\t\t        </TableBody>\n\t\t      </Table>\n\t\t    </TableContainer>\n\n\t\t    <TableContainer component={Paper} className=\"production-table__table-container\">\n\t\t    \t<Table stickyHeader>\n\t\t\t        <TableFooter className=\"production-table__footer\">\n\t\t\t          <TableRow>\n\t\t\t            <TableCell className=\"production-table__cell production-table__footer-cell\" variant=\"head\" align=\"center\">\n\t\t\t            \t<span className=\"production-table__head-cell\">Нужно делать по</span>:\n\t\t\t            </TableCell>\n\t\t\t            <TableCell className=\"production-table__cell production-table__footer-cell\" variant=\"head\" align=\"center\">\n\t\t\t            \t{remainTodo}\n\t\t\t            </TableCell>\n\t\t\t          </TableRow>\n\t\t\t        </TableFooter>\n\t\t\t    </Table>\n\t        </TableContainer>\n\t    </>\n\t)\n}\n"]},"metadata":{},"sourceType":"module"}