{"ast":null,"code":"export class DBService {\n  constructor() {\n    this.url = 'http://localhost:4000/api';\n  }\n\n  async getMonth(p) {\n    try {\n      const res = await fetch(`${this.url}/month/${p}`);\n\n      if (!res.ok) {\n        throw new Error(`Could not fetch ${this.url}/month/${p}` + `, received ${res.status}`);\n      }\n\n      const result = await res.json();\n      return result;\n    } catch (e) {\n      console.log(e.message);\n      return await {};\n    }\n  }\n\n  async updateWorkDay(product, day, amount) {\n    const res = await fetch(`${this.url}/day/${product}`, {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        product,\n        day,\n        amount\n      })\n    });\n  }\n\n  async updatePlan(product, plan) {\n    const res = await fetch(`${this.url}/plan/${product}`, {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        product,\n        plan\n      })\n    });\n  }\n\n  async updatePpr(product, ppr) {\n    const res = await fetch(`${this.url}/ppr/${product}`, {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        product,\n        ppr\n      })\n    });\n  }\n\n}","map":{"version":3,"sources":["/home/lightmare/Documents/dev/web/tnp_plan/client/src/services/DBService.ts"],"names":["DBService","url","getMonth","p","res","fetch","ok","Error","status","result","json","e","console","log","message","updateWorkDay","product","day","amount","method","headers","body","JSON","stringify","updatePlan","plan","updatePpr","ppr"],"mappings":"AAEA,OAAO,MAAMA,SAAN,CAAgB;AAAA;AAAA,SACLC,GADK,GACC,2BADD;AAAA;;AAGtB,QAAaC,QAAb,CAAsBC,CAAtB,EAAuD;AACtD,QAAI;AACH,YAAMC,GAAG,GAAG,MAAMC,KAAK,CAAE,GAAE,KAAKJ,GAAI,UAASE,CAAE,EAAxB,CAAvB;;AAEG,UAAI,CAACC,GAAG,CAACE,EAAT,EAAa;AACX,cAAM,IAAIC,KAAJ,CAAW,mBAAkB,KAAKN,GAAI,UAASE,CAAE,EAAvC,GACb,cAAaC,GAAG,CAACI,MAAO,EADrB,CAAN;AAED;;AAED,YAAMC,MAAM,GAAG,MAAML,GAAG,CAACM,IAAJ,EAArB;AACA,aAAOD,MAAP;AAEH,KAXD,CAWE,OAAOE,CAAP,EAAU;AACXC,MAAAA,OAAO,CAACC,GAAR,CAAYF,CAAC,CAACG,OAAd;AACA,aAAO,MAAM,EAAb;AACA;AAED;;AAED,QAAaC,aAAb,CAA2BC,OAA3B,EAA8CC,GAA9C,EAA2DC,MAA3D,EAA2E;AAC1E,UAAMd,GAAG,GAAG,MAAMC,KAAK,CAAE,GAAE,KAAKJ,GAAI,QAAOe,OAAQ,EAA5B,EAA+B;AACrDG,MAAAA,MAAM,EAAE,KAD6C;AAElDC,MAAAA,OAAO,EAAE;AACP,wBAAgB;AADT,OAFyC;AAKlDC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAACP,QAAAA,OAAD;AAAUC,QAAAA,GAAV;AAAeC,QAAAA;AAAf,OAAf;AAL4C,KAA/B,CAAvB;AAOA;;AAED,QAAaM,UAAb,CAAwBR,OAAxB,EAA2CS,IAA3C,EAAyD;AACxD,UAAMrB,GAAG,GAAG,MAAMC,KAAK,CAAE,GAAE,KAAKJ,GAAI,SAAQe,OAAQ,EAA7B,EAAgC;AACtDG,MAAAA,MAAM,EAAE,KAD8C;AAEnDC,MAAAA,OAAO,EAAE;AACP,wBAAgB;AADT,OAF0C;AAKnDC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAACP,QAAAA,OAAD;AAAUS,QAAAA;AAAV,OAAf;AAL6C,KAAhC,CAAvB;AAOA;;AAED,QAAaC,SAAb,CAAuBV,OAAvB,EAA0CW,GAA1C,EAAuD;AACtD,UAAMvB,GAAG,GAAG,MAAMC,KAAK,CAAE,GAAE,KAAKJ,GAAI,QAAOe,OAAQ,EAA5B,EAA+B;AACrDG,MAAAA,MAAM,EAAE,KAD6C;AAElDC,MAAAA,OAAO,EAAE;AACP,wBAAgB;AADT,OAFyC;AAKlDC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAACP,QAAAA,OAAD;AAAUW,QAAAA;AAAV,OAAf;AAL4C,KAA/B,CAAvB;AAOA;;AAlDqB","sourcesContent":["import { WorkMonth, Products } from '../models';\n\nexport class DBService {\n\tprivate readonly url = 'http://localhost:4000/api';\n\n\tpublic async getMonth(p: Products): Promise<WorkMonth> {\n\t\ttry {\n\t\t\tconst res = await fetch(`${this.url}/month/${p}`);\n\n\t\t    if (!res.ok) {\n\t\t      throw new Error(`Could not fetch ${this.url}/month/${p}` +\n\t\t        `, received ${res.status}`)\n\t\t    }\n\n\t\t    const result = await res.json()\n\t\t    return result;\n\n\t\t} catch (e) {\n\t\t\tconsole.log(e.message);\n\t\t\treturn await {} as WorkMonth;\n\t\t}\n\t\t\n\t}\n\n\tpublic async updateWorkDay(product: Products, day: number, amount: number) {\n\t\tconst res = await fetch(`${this.url}/day/${product}`, {\n\t\t\tmethod: 'PUT',\n\t\t    headers: {\n\t\t      'Content-Type': 'application/json'\n\t\t    },\n\t\t    body: JSON.stringify({product, day, amount})\n\t\t})\n\t}\n\n\tpublic async updatePlan(product: Products, plan: number) {\n\t\tconst res = await fetch(`${this.url}/plan/${product}`, {\n\t\t\tmethod: 'PUT',\n\t\t    headers: {\n\t\t      'Content-Type': 'application/json'\n\t\t    },\n\t\t    body: JSON.stringify({product, plan})\n\t\t})\n\t}\n\n\tpublic async updatePpr(product: Products, ppr: number) {\n\t\tconst res = await fetch(`${this.url}/ppr/${product}`, {\n\t\t\tmethod: 'PUT',\n\t\t    headers: {\n\t\t      'Content-Type': 'application/json'\n\t\t    },\n\t\t    body: JSON.stringify({product, ppr})\n\t\t})\n\t}\n}"]},"metadata":{},"sourceType":"module"}